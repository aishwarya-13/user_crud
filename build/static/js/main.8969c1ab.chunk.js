(this.webpackJsonpclient_user=this.webpackJsonpclient_user||[]).push([[0],{40:function(e,t,n){},69:function(e,t,n){"use strict";n.r(t);var c=n(0),a=n.n(c),o=n(18),i=n.n(o),l=(n(40),n(11)),r=n(3),s=n(14),j=n(16),u=n(15),d=n(10),b=n.n(d),h=n(9),O=n(1),f=function(){Object(r.f)(),Object(r.g)();var e=Object(r.h)(),t=(Object(h.c)((function(e){return e.jwt})),!!(null===e||void 0===e?void 0:e.id)),n={fname:"",lname:""},a=Object(c.useState)(n),o=Object(u.a)(a,2),i=o[0],l=o[1],d=function(e,t){var n=e.target.value?e.target.value.trim():"";l((function(e){return Object(j.a)(Object(j.a)({},e),{},Object(s.a)({},t,n))}))},f=function(){l(n)};return Object(c.useEffect)((function(){console.log("lo",e);var t=null===e||void 0===e?void 0:e.id;if(null===e||void 0===e?void 0:e.id){var n={"Content-Type":"application/json",Authorization:"Bearer ".concat(localStorage.getItem("jwt"))};b.a.get("http://localhost:8082/user/".concat(t),{headers:n}).then((function(e){console.log("res",e);var t=null===e||void 0===e?void 0:e.data;t&&l((function(){return{fname:t.fname,lname:t.lname}}))}))}}),[]),Object(O.jsx)("form",{children:Object(O.jsxs)("div",{children:[Object(O.jsxs)("div",{children:[Object(O.jsx)("label",{children:"Fullname:"}),Object(O.jsx)("input",{type:"text",value:i.fname,onChange:function(e){d(e,"fname")}})]}),Object(O.jsxs)("div",{children:[Object(O.jsx)("label",{children:"Lastname:"}),Object(O.jsx)("input",{type:"text",value:i.lname,onChange:function(e){d(e,"lname")}})]}),Object(O.jsx)("button",{onClick:function(n){n.preventDefault();var c={"Content-Type":"application/json",Authorization:"Bearer ".concat(localStorage.getItem("jwt"))};t?b.a.put("http://localhost:8082/user",{fname:i.fname,lname:i.lname,id:null===e||void 0===e?void 0:e.id},{headers:c}).then((function(e){console.log("res",e),200===e.status&&f()})):b.a.post("http://localhost:8082/user",{fname:i.fname,lname:i.lname},{headers:c}).then((function(e){console.log("res",e),200===e.status&&f()}))},children:t?"Update User":"Create User"})]})})},p=function(){var e=Object(h.b)(),t=Object(r.f)(),n=(Object(h.c)((function(e){return e.jwt})),Object(c.useState)({fname:"",lname:""})),a=Object(u.a)(n,2),o=a[0],i=a[1],l=function(e,t){var n=e.target.value?e.target.value.trim():"";i((function(e){return Object(j.a)(Object(j.a)({},e),{},Object(s.a)({},t,n))}))};return Object(O.jsxs)("div",{children:[Object(O.jsxs)("div",{children:[Object(O.jsx)("label",{children:"Firstname:"}),Object(O.jsx)("input",{type:"text",value:o.fname,onChange:function(e){l(e,"fname")}})]}),Object(O.jsxs)("div",{children:[Object(O.jsx)("label",{children:"Lastname:"}),Object(O.jsx)("input",{type:"text",value:o.lname,onChange:function(e){l(e,"lname")}})]}),Object(O.jsx)("button",{onClick:function(n){n.preventDefault(),b.a.post("http://localhost:8082/login",{fname:o.fname,lname:o.lname}).then((function(n){var c,a;e(function(e){return console.log("jwt",e),{type:"SAVE_JWT",payload:e}}(null===n||void 0===n||null===(c=n.data)||void 0===c?void 0:c.jwtToken)),window.localStorage.setItem("jwt",null===n||void 0===n||null===(a=n.data)||void 0===a?void 0:a.jwtToken),t.push("/"),console.log("res",n)}))},children:"Login"})]})},v=function(){var e=Object(r.f)(),t=(Object(h.c)((function(e){return e.jwt})),Object(c.useState)([])),n=Object(u.a)(t,2),a=n[0],o=n[1];return Object(c.useEffect)((function(){var e={"Content-Type":"application/json",Authorization:"Bearer ".concat(localStorage.getItem("jwt"))};b.a.get("http://localhost:8082/list",{headers:e}).then((function(e){var t=e.data;o(t),console.log("list",t)}))}),[]),Object(O.jsxs)("div",{children:["This is list of users",Object(O.jsx)("ul",{children:(null===a||void 0===a?void 0:a.length)?a.map((function(t,n){return Object(O.jsx)("div",{children:Object(O.jsxs)("li",{children:[Object(O.jsxs)("div",{children:[Object(O.jsx)("b",{children:"Firstname:"}),t.fname]}),Object(O.jsxs)("div",{children:[Object(O.jsx)("b",{children:"Lastname:"}),t.lname]}),Object(O.jsxs)("div",{children:[Object(O.jsx)("b",{children:"Role:"}),t.role]}),"admin"!==t.role?Object(O.jsxs)("div",{children:[Object(O.jsx)("button",{onClick:function(){!function(e){var t={"Content-Type":"application/json",Authorization:"Bearer ".concat(localStorage.getItem("jwt"))};b.a.delete("http://localhost:8082/user/".concat(e),{headers:t}).then((function(t){console.log("User deleted successfully",t),200===t.status&&o((function(t){return JSON.parse(JSON.stringify(t)),t.filter((function(t,n){return t.id!==e}))}))}))}(t.id)},children:"Delete"}),Object(O.jsx)("button",{onClick:function(){var n;n=t.id,e.push({pathname:"user/".concat(n),state:{id:n}})},children:"Update"})]}):Object(O.jsx)("span",{})]})})})):Object(O.jsx)("span",{})})]})},m=function(){return Object(O.jsx)(l.a,{children:Object(O.jsxs)("div",{children:[Object(O.jsxs)("ul",{children:[Object(O.jsx)("li",{children:Object(O.jsx)(l.b,{to:"/",children:"Home"})}),Object(O.jsx)("li",{children:Object(O.jsx)(l.b,{to:"/login",children:"Login"})}),Object(O.jsx)("li",{children:Object(O.jsx)(l.b,{to:"/create",children:"Create User"})})]}),Object(O.jsxs)(r.c,{children:[Object(O.jsx)(r.a,{exact:!0,path:"/",component:v}),Object(O.jsx)(r.a,{path:"/login",component:p}),Object(O.jsx)(r.a,{path:"/create",component:f}),Object(O.jsx)(r.a,{path:"/user/:id",component:f})]})]})})},x=function(e){e&&e instanceof Function&&n.e(3).then(n.bind(null,70)).then((function(t){var n=t.getCLS,c=t.getFID,a=t.getFCP,o=t.getLCP,i=t.getTTFB;n(e),c(e),a(e),o(e),i(e)}))},g=n(12),w=n(35),C=Object(g.c)({jwt:function(e,t){switch(t.type){case"SAVE_JWT":return console.log("in reducer",t.payload),t.payload;default:return""}}}),y=Object(g.e)(C,Object(g.d)(Object(g.a)(w.a)));i.a.render(Object(O.jsx)(h.a,{store:y,children:Object(O.jsx)(a.a.StrictMode,{children:Object(O.jsx)(m,{})})}),document.getElementById("root")),x()}},[[69,1,2]]]);
//# sourceMappingURL=main.8969c1ab.chunk.js.map